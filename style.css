/* --- 기본 및 반응형 설정 --- */
:root {
    --font-size-h1: 2.2rem;
    --font-size-h2: 1.8rem;
    --font-size-p: 1.2rem;
    --font-size-button: 1.3rem;
}

body, html {
    margin: 0;
    padding: 0;
    width: 100%;
    font-family: 'Pretendard', sans-serif; 
}

body {
    background: #f0f8ff;  
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: 100vh;
}

#result-text {
    font-size: 1.2rem; /* 글자 크기 (1rem이 기본 크기) */
    line-height: 1.5;  /* 줄 간격 */
    margin-bottom: 1rem; /* 아래쪽 여백 */
}

/* --- 페이지별 레이아웃 설정 --- */
#survey-page, #result-page, #quiz-page, #explanation-page {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    width: 100%;
    max-width: 600px;
    padding: 2rem 1rem;
    box-sizing: border-box;
}

#survey-page { 
    min-height: 400px; /* 다음문제 넘어갈때 지워도 화면 찌그러지듯 깜박이는거 방지 */
}

#intro-page {
    background: rgba(255, 255, 255, 0.95);
    border-radius: 32px;
    
    /* [수정] Flexbox 활성화 및 방향 설정 */
    display: flex;             /* 이게 있어야 아래 정렬 속성이 먹힙니다 */
    flex-direction: column;    /* 요소들을 세로로 배치 */
    
    justify-content: center;
    align-items: center;       /* 자식 요소(차트 포함)를 가로 중앙 정렬 */
    
    padding: 48px 40px;
    max-width: 480px;
    width: 90%;
    text-align: center;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
    backdrop-filter: blur(10px);
    animation: fadeIn 0.8s ease-out;
}

body.final-page-active {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    /* 전체 화면을 덮도록 설정 */
    min-height: 100vh;
    margin: 0; /* 기본 마진 제거 */
}

  #final-page {         
            text-align: center;
            padding: 40px 20px;
            animation: fadeIn 1s ease-in;
            max-width: 600px;
            width: 100%;
            display: flex;
           flex-direction: column; 
           justify-content: center;
           align-items: center;
           gap: 10px;
        }

@keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }


 #sparkling-hexagon {
            font-size: 80px;
            animation: sparkleRotate 3s ease-in-out infinite;
            margin-bottom: 20px;
            filter: drop-shadow(0 0 20px rgba(255, 255, 255, 0.8));
        }

        @keyframes sparkleRotate {
            0%, 100% { transform: rotate(0deg) scale(1); }
            50% { transform: rotate(180deg) scale(1.2); }
        }

#final-page h2 {
    color: #ffffff;
    font-size: 48px;
    margin: 20px 0;
    text-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
    animation: glow 2s ease-in-out infinite alternate;
}


 @keyframes glow {
            from { text-shadow: 0 0 20px rgba(255, 255, 255, 0.5); }
            to { text-shadow: 0 0 40px rgba(255, 255, 255, 0.9), 0 0 60px rgba(255, 182, 255, 0.6); }
        }

 #final-page p {
            color: #ffffff;
            font-size: 24px;
            margin: 20px 0 40px 0;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }



#final-page .floating-particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }

#final-page .particle {
            position: absolute;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.8) 0%, transparent 70%);
            border-radius: 50%;
            animation: float 4s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) translateX(0); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { transform: translateY(-100vh) translateX(50px); opacity: 0; }
        }

        @media (max-width: 600px) {
           #final-page h2 { font-size: 36px; }
           #final-page p { font-size: 18px; }
          #final-page #sparkling-hexagon { font-size: 60px; }
        }


/* --- 공통 요소 반응형 스타일 --- */
h1 { font-size: var(--font-size-h1); margin-bottom: 15px; }
h2 { font-size: var(--font-size-h2);  margin: 1;
    padding: 0; }
p { font-size: var(--font-size-p); line-height: 1.5; color: #0f0f0f; }

button {
    padding: 0.8em 1.5em;
    font-size: var(--font-size-button);
    border-radius: 8px;
    border: none;
    cursor: pointer;
    background-color: #6c757d;
    color: white;
    margin-top: 0.5rem;
    font-weight: bold;
    transition: background-color 0.3s ease, transform 0.2s ease;
}
button:hover {
    transform: scale(1.05);
}

#start-btn {
    /* 기존 스타일 유지 */
    padding: 15px 50px;
    font-size: 1.2rem;
    background: linear-gradient(90deg, #17a1b9 0%, #830093 100%);
    border-radius: 30px;
    color: white; /* 텍스트가 잘 보이도록 흰색 추가 권장 */
    border: none; /* 기본 테두리 제거 권장 */
    cursor: pointer;

    /* 반짝임 효과를 위한 필수 설정 */
    position: relative; /* 가상 요소의 위치 기준점 */
    overflow: hidden;   /* 버튼 밖으로 나가는 빛을 숨김 */

/* [추가됨] 그림자 설정: X축 Y축 흐림정도 색상(투명도) */
    /* 버튼의 보라색(#830093)과 비슷한 톤으로 그림자를 주어 자연스럽게 만듦 */
    box-shadow: 0 5px 15px rgba(131, 0, 147, 0.4);

    /* [추가됨] 마우스 올렸을 때 부드러운 움직임을 위함 */
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}

/* [추가됨] 마우스를 올렸을 때 버튼이 살짝 뜨는 효과 */
#start-btn:hover {
    transform: translateY(-3px); /* 위로 3px 이동 */
    box-shadow: 0 8px 25px rgba(131, 0, 147, 0.6); /* 그림자가 더 넓고 진해짐 */
}
/* 빛이 지나가는 효과 (가상 요소) */
#start-btn::after {
    content: "";
    position: absolute;
    top: 0;
    left: -100%; /* 버튼 왼쪽 바깥에서 시작 */
    width: 100%;
    height: 100%;
    
    /* 투명 -> 흰색 반투명 -> 투명으로 이어지는 그라데이션 */
    background: linear-gradient(
        90deg, 
        transparent, 
        rgba(255, 255, 255, 0.2), 
        transparent
    );
    
    /* 빛을 약간 기울임 */
    transform: skewX(-20deg);
    
    /* 애니메이션 적용 (3초마다 반복) */
    animation: shine 3s infinite;
}

/* 빛이 왼쪽에서 오른쪽으로 이동하는 애니메이션 */
@keyframes shine {
    0% {
        left: -100%;
    }
    50%, 100% {
        left: 200%; /* 버튼 오른쪽 끝까지 이동 후 대기 */
    }
}

#back-btn:hover {
    background-color: #8da0cb; /* 마우스를 올렸을 때 조금 더 진한 색 */
}

/* --- 차트 스타일 --- */
.chart-container {
    position: relative;
    width: 90vw;
    max-width: 400px;
    aspect-ratio: 1 / 1;
    margin-bottom: 1rem; /* 차트와 텍스트 사이 간격 추가 */
}

svg, canvas {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 100%;
    height: 100%;
}

canvas { z-index: 1; }
svg { z-index: 0; }

.hexagon { stroke: #ADD8E6; stroke-width: 1; fill: url(#grad); filter: drop-shadow(0 0 12px rgba(255, 182, 255, 0.7)); }
.sparkle { fill: white; opacity: 0; animation: sparkle 2s infinite; }
@keyframes sparkle { 0%, 100% { opacity: 0; } 50% { opacity: 1; } }

/* =========================================
   [통합 스타일] 서베이(Survey) & 퀴즈(Quiz)
   ========================================= */

/* 1. 진행바 (Progress Bar) - 공통 스타일 */
#survey-progress-container,
#progress-bar-container {
    width: 100%;
    max-width: 100%;
    height: 10px;           /* 얇고 세련된 두께 */
    background-color: #f3f4f6; /* 아주 연한 회색 배경 */
    border-radius: 20px;    /* 둥근 끝 */
    margin-bottom: 30px;    /* 질문 박스와의 간격 */
    overflow: hidden;
}

#survey-progress-bar, 
#progress-bar {
    height: 100%;
    width: 0%;
    /* 이미지와 유사한 보라~핑크 그라데이션 */
    background: linear-gradient(90deg, #8b5cf6 0%, #d946ef 100%);
    border-radius: 20px;
    transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);
}

/* 2. 질문 박스 (Card Design) - 공통 스타일 */
/* 서베이의 #question-text와 퀴즈의 #quiz-question-container를 카드 형태로 통일 */
#question-text,
#quiz-question-container {
    opacity: 1;
    transition: opacity 0.3s ease;
    white-space: pre-wrap; /* \n을 줄바꿈으로 인식함 */
    background-color: #ffffff;
    width: 100%;
    box-sizing: border-box;
    padding: 40px 30px;     /* 넉넉한 내부 여백 */
    border-radius: 24px;    /* 부드러운 모서리 */
    margin: 0 0 24px 0;     /* 아래쪽 선택지와의 간격 */
    
    /* [핵심] 이미지와 같은 부드러운 그림자 효과 */
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.08);
    border: 1px solid rgba(0,0,0,0.02);

    /* 텍스트 스타일 */
    font-size: 1.5rem;
    font-weight: 700;
    color: #1f2937;
    line-height: 1.5;
    word-break: keep-all;   /* 한글 줄바꿈 최적화 */
}

/* 퀴즈 질문 내부 텍스트(p태그) 마진 초기화 */
#quiz-question-text {
    margin: 0;
    font-size: inherit;
    font-weight: inherit;
    color: inherit;
    line-height: inherit;
}

/* 3. 선택지 컨테이너 - 공통 스타일 */
#choices-container,
#quiz-choices-container {
    display: flex;
    flex-direction: column;
    width: 100%;
    gap: 12px; /* 버튼 사이 간격 */
}

/* 4. 선택지 버튼 (Card Button) - 공통 스타일 */
#choices-container button,
#quiz-choices-container button {
    width: 100%;
    padding: 18px 24px;
    font-size: 1.1rem;
    color: #4b5563;         /* 부드러운 회색 텍스트 */
    background: #ffffff;    /* 흰색 배경 */
    
    /* 테두리와 모서리 */
    border: 2px solid #e5e7eb; 
    border-radius: 16px;    /* 버튼 모서리 */
    
    cursor: pointer;
    transition: all 0.2s ease;
    text-align: left;       /* 왼쪽 정렬 */
    font-weight: 500;
    margin-top: 0;
    line-height: 1.4;
    
    /* 기존 그라데이션 제거 */
    background-image: none; 
    box-shadow: 0 2px 4px rgba(0,0,0,0.02);
}

/* 선택지 마우스 올렸을 때 (Hover) */
#choices-container button:hover,
#quiz-choices-container button:hover {
    background-color: #f9fafb; /* 아주 연한 보라빛 회색 */
    border-color: #8b5cf6;     /* 테두리 보라색 포인트 */
    color: #111;
    transform: translateY(-2px); /* 살짝 떠오름 */
    box-shadow: 0 4px 12px rgba(139, 92, 246, 0.15); /* 보라색 그림자 */
}

/* 선택지 클릭 시 (Active) */
#choices-container button:active,
#quiz-choices-container button:active {
    transform: scale(0.98);
}

/* 퀴즈: 정답/오답 확인 후 비활성화 버튼 스타일 */
#quiz-choices-container button:disabled {
    cursor: default;
    transform: none;
    box-shadow: none;
    opacity: 0.9;
}

/* 5. '이전 질문' 버튼 (Survey 전용) */
#back-btn {
    margin-top: 30px;
    padding: 10px 24px;
    font-size: 1rem;
    background-color: transparent;
    color: #9ca3af;
    border: 1px solid #e5e7eb;
    border-radius: 30px;
    transition: all 0.2s;
    font-weight: normal;
}

#back-btn:hover {
    background-color: #f3f4f6;
    color: #374151;
    border-color: #d1d5db;
    transform: none;
}

/* 6. 애니메이션 효과 */
/* 오답 흔들림 */
.shake {
    animation: shake 0.4s cubic-bezier(.36,.07,.19,.97) both;
}

@keyframes shake {
    10%, 90% { transform: translate3d(-1px, 0, 0); }
    20%, 80% { transform: translate3d(2px, 0, 0); }
    30%, 50%, 70% { transform: translate3d(-4px, 0, 0); }
    40%, 60% { transform: translate3d(4px, 0, 0); }
}

/* 결과 차트 반짝임 \*/
@keyframes blinking-effect {
  from { box-shadow: 0 0 15px #ffc0cb, 0 0 25px #ffc0cb; }
  to { box-shadow: 0 0 25px #ff99b3, 0 0 35px #ff99b3; }
}

/* --- [추가] 결과 페이지 카드 미션 스타일 --- */

.mission-section {
    width: 100%;
    margin-top: 30px;
    background-color: #f8f9fa;
    padding: 20px;
    border-radius: 20px;
    box-shadow: inset 0 0 20px rgba(0,0,0,0.05);
}

.mission-instruction {
    font-size: 1rem;
    color: #666;
    margin-bottom: 15px;
}

/* 진행바 */
.mission-progress-container {
    margin-bottom: 20px;
    width: 100%;
}
.mission-label {
    font-weight: bold;
    color: #6c757d;
    margin-bottom: 5px;
    text-align: right;
    font-size: 0.9rem;
}
.mission-track {
    background: #e9ecef;
    height: 15px;
    border-radius: 10px;
    overflow: hidden;
}
.mission-fill {
    height: 100%;
    background: linear-gradient(90deg, #FFC107 0%, #FF9800 100%); /* 에너지 느낌의 노란/주황색 */
    width: 0%;
    transition: width 0.4s ease;
}

/* 카드 그리드 */
.cards-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); /* 반응형 그리드 */
    gap: 15px;
    margin-bottom: 25px;
}

.mission-card {
    background: white;
    border-radius: 15px;
    padding: 20px;
    cursor: pointer;
    transition: all 0.3s ease;
    border: 2px solid transparent;
    box-shadow: 0 4px 10px rgba(0,0,0,0.05);
    position: relative;
    overflow: hidden; /* 반짝임이 밖으로 나가지 않게 */
}

.mission-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 15px rgba(0,0,0,0.1);
}

/* 선택된 카드 스타일 */
.mission-card.selected {
    border-color: #FF9800;
    background: #fff8e1; /* 연한 노란색 배경 */
}
.mission-card.selected .card-icon {
    transform: scale(1.2);
    transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.card-icon { font-size: 2.5rem; margin-bottom: 10px; }
.card-title { font-weight: bold; font-size: 1.1rem; margin-bottom: 8px; color: #333; }
.card-desc { font-size: 0.9rem; color: #666; line-height: 1.4; word-break: keep-all; } 

/* 완료 버튼 스타일 재정의 */
.complete-button {
    width: 100%;
    padding: 15px;
    font-size: 1.1rem;
    background: #ced4da; /* 비활성 색상 */
    border-radius: 50px;
    cursor: not-allowed;
    transition: all 0.3s;
    border: none;
    color: white;
}

.complete-button:not(:disabled) {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    cursor: pointer;
    box-shadow: 0 4px 15px rgba(118, 75, 162, 0.4);
}

.complete-button.pulse-animation {
    animation: btnPulse 2s infinite;
}

@keyframes btnPulse {
    0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(118, 75, 162, 0.7); }
    70% { transform: scale(1.02); box-shadow: 0 0 0 10px rgba(118, 75, 162, 0); }
    100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(118, 75, 162, 0); }
}

/* 카드 클릭 시 반짝임 효과 (Sparkles) */
.card-sparkle {
    position: absolute;
    top: 50%; left: 50%;
    width: 6px; height: 6px;
    background: gold;
    border-radius: 50%;
    pointer-events: none;
    animation: card-sparkle-burst 0.6s ease-out forwards;
}

@keyframes card-sparkle-burst {
    0% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
    100% { opacity: 0; transform: translate(calc(-50% + var(--tx)), calc(-50% + var(--ty))) scale(0); }
}



        .result-box {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 8px 24px rgba(0,0,0,0.15);
        }

       .result-title {
    font-size: 28px;
    font-weight: 800;
    color: #b353f7; /* 강조색 */
    margin-bottom: 20px;
    padding-bottom: 15px;
    border-bottom: 2px dashed #eee; /* 하단 점선 구분선 */
}

.result-text {
    font-size: 1.2rem;
    line-height: 1.6;
    color: #333;
    
    /* [수정] 텍스트 정렬 및 줄바꿈 최적화 */
    text-align: center;         /* 중앙 정렬 (선택 사항, 깔끔해 보임) */
    word-break: keep-all;       /* 한글 단어 중간에 끊기지 않도록 설정 (가독성 UP) */
    white-space: pre-wrap;      /* 줄바꿈 문자(\n, <br>)를 존중하고, 내용이 넘치면 자동 줄바꿈 */
     
    margin-bottom: 20px;
    padding: 0 10px;            /* 좌우 여백을 살짝 주어 답답함 해소 */
}

/* 해설 강조 키워드 디자인 */
.keyword-badge {
    display: inline-block;
    background-color: #d7f5eb; /* 연한 분홍 배경 */
    color: #07a362;            /* 진한 분홍 글자 */
    padding: 5px 15px;         /* 안쪽 여백 */
    border-radius: 20px;       /* 둥근 모서리 */
    font-weight: bold;
    font-size: 1.2em;
    margin-bottom: 10px;
    border: 1px solid #d7f5e; /* 테두리 살짝 */
    box-shadow: 0 2px 5px rgba(228, 245, 239, 0.1);
}

@media (max-width: 600px) {
    #intro-page {
        /* 너비를 90% -> 85%로 줄여서 양옆 여백 확보 (그림자 공간) */
        width: 85%; 
        
        /* 내부 여백을 줄여서 작은 화면에서도 내용이 잘 들어가게 함 */
        padding: 30px 20px; 
        
        /* 위아래 여백을 조금 더 줘서 안전하게 배치 */
        margin: 20px auto; 
    }

    /* 차트 크기도 모바일에서는 조금 줄여서 균형 맞추기 */
    .chart-container {
        width: 100%; /* 부모 컨테이너 기준 꽉 차게 */
        max-width: 280px; /* 너무 커지지 않게 제한 */
    }
}


/* 숨길 때 사용할 클래스 */
.fade-out {
    opacity: 0 !important; /* 투명하게 만듦 */
}
